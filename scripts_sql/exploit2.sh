#!/bin/bash

USER="exploit"
MESSAGE_ERROR="1226"

read -p "Cuantas veces quieres que se repita: " VECES

CONTADOR=0

for num in $(seq 1 $VECES) ;do

	ATTACK=`mysql -u "$USER" -e "SELECT * FROM fary_adventure.characters" &`
	
	#echo $ATTACK
	#echo $ATTACK | grep -q "$MESSAGE_ERROR"
	VERIFICATION=`echo $ATTACK | grep "$MESSAGE_ERROR"`

	if [ "$VERIFICATION" != "" ];then
		echo "Accesos a la base de datos limitada al usuario"	
		CONTADOR=$(($CONTADOR + 1))	
	fi
done

echo "Ha dado $CONTADOR de ERRORES no ejecutados"
exit 0
